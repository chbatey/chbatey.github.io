---
layout: post
title: " Getting to know tcpdump"
date: '2014-06-15T03:07:00.001-07:00'
author: Christopher Batey
tags: 
modified_time: '2014-06-15T03:07:24.027-07:00'
blogger_id: tag:blogger.com,1999:blog-4161315644722406995.post-8190711927341383892
blogger_orig_url: https://www.blogger.com/comment.g?blogID=4161315644722406995&postID=8190711927341383892
---

Most of the time I an work with the great abstraction of a "network" it sends my data from one application I'm working on to another, this I see as a line, I may at most write HTTP over TCP/IP on it and forget the details. This is great until it doesn't work, and when it doesn't work tcpdump becomes my friend.<br /><br />So what is it? Not surprisingly it dumps tcp network traffic to standard out.<br /><br />Why should you know about it? Well if you're developing any application that makes any call out over TCP, e.g database drivers, http requests, then you'd rather not be the guy who when your application hangs says "but I called the right Java method".<br /><br />Getting all traffic is as simple as running tcpdunp. To filter by network device:<br /><br />Get a list of network devices either via tcpdump or ifconfig:<br /><br />sudo tcpdump -D<br />1.en0<br />2.bridge0<br />3.vboxnet1<br />4.en2<br />5.p2p0<br />6.en3<br />7.lo0<br /><br />If you're debugging something locally e.g an app running on your machine talking to a database on your machine you can capture just local traffic e.g<br /><br />tcpdump -i lo0<br /><br />Then to see some traffic try:<br /><br />ping localhost<br /><br />10:54:29.680571 IP localhost &gt; localhost: ICMP echo request, id 27575, seq 0, length 64<br />10:54:29.680597 IP localhost &gt; localhost: ICMP echo reply, id 27575, seq 0, length 64<br /><br />The output is protocol specific but you can see the date, the protocol, from host, to host, then ICMP which is part of the IP protocol. Pretty nifty.<br /><br />Now lets see some TCP traffic. I'm going to change my tcpdump command a litle:<br /><br />tcpdump -n -i lo0 tcp<br /><br />-n means I don't want host names resolved, so we'll see IP address/port. Adding tcp on the end means we'll only see tcp traffic.<br /><br />To get a server I'll use nc:<br /><br />nc -l 3333<br /><br />Then connect to it using telnet:<br /><br />telnet localhost 3333<br /><br />And we get some more interesting traffic on the local adapter:<br /><br /><br /><br /><br />