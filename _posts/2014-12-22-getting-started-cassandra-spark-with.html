---
layout: post
title: 'Getting started: Cassandra + Spark with Vagrant'
date: '2014-12-22T06:22:00.000-08:00'
author: Christopher Batey
tags:
- spark
- cassandra
- vagrant
modified_time: '2014-12-22T06:22:49.624-08:00'
thumbnail: http://4.bp.blogspot.com/-2fqD1Mn5TMg/VELXB0ZHf9I/AAAAAAAAASM/jMfdTfD_Jjc/s72-c/Screenshot%2B2014-10-18%2B22.09.06.png
blogger_id: tag:blogger.com,1999:blog-4161315644722406995.post-3443102924301529818
blogger_orig_url: http://christopher-batey.blogspot.com/2014/12/getting-started-cassandra-spark-with.html
---

I play with a lot of different technologies and I like to keep my work stations clean. I do this by having a lot of vagrant VMs. My latest is Apache Spark with Apache Cassandra. We're going to install a working setup of Cassandra/Spark using Vagrant and Ansible. The Vagrant/Ansible is on Github <a href="https://github.com/chbatey/vagrant-cassandra-spark" target="_blank">here</a>.<br /><br />To get going you'll need:<br /><ul><li><a href="https://www.vagrantup.com/" target="_blank">Vagrant</a></li><li><a href="https://www.virtualbox.org/" target="_blank">Virtual Box</a></li><li><a href="https://github.com/ansible/ansible" target="_blank">Ansible</a> (used for provisioning)</li><li>Git</li></ul><div>If you haven't used Ansible before ignore all the paid for Ansible Tower and install it with your favourite package manager e.g homebrew or apt.&nbsp;</div><div><br /></div><div>Once that's installed checkout the <a href="https://github.com/chbatey/vagrant-cassandra-spark" target="_blank">Vagrant file</a>.</div><div><br /></div><div>Then launch the VM with vagrant up. This can take some time as it actually installs:<br /><ul><li>Java</li><li>Cassandra</li><li>Spark</li><li>Spark Cassandra connector</li></ul><div>I could have baked a virtual box with all this in but the Ansible also documents you install all of these (and me once I've forgotten). As well as being slow it has the disadvantage that if downloads Cassandra/Spark so if their repositories are down it won't work.</div></div><div><br /></div><div>The VM runs on port 192.168.10.10. Your Spark master should be up and running on&nbsp;<a href="http://192.168.10.10:8080/">http://192.168.10.10:8080/</a></div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-2fqD1Mn5TMg/VELXB0ZHf9I/AAAAAAAAASM/jMfdTfD_Jjc/s1600/Screenshot%2B2014-10-18%2B22.09.06.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-2fqD1Mn5TMg/VELXB0ZHf9I/AAAAAAAAASM/jMfdTfD_Jjc/s1600/Screenshot%2B2014-10-18%2B22.09.06.png" height="180" width="320" /></a></div><div><br /></div><div class="separator" style="clear: both; text-align: center;"></div><div><br /></div><div>You'll also have ops centre installed at:&nbsp;<a href="http://192.168.10.10:8080/">http://192.168.10.10:8888/</a></div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-QQPJgM1o1T0/VELXs12nZ7I/AAAAAAAAASU/weofVaY-6Fw/s1600/Screenshot%2B2014-10-18%2B22.11.18.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-QQPJgM1o1T0/VELXs12nZ7I/AAAAAAAAASU/weofVaY-6Fw/s1600/Screenshot%2B2014-10-18%2B22.11.18.png" height="255" width="320" /></a></div><div><br /></div><div><br /></div><div>To add the cluster simply click "Add existing cluster.." then enter the IP 192.168.10.10</div><div><br /></div><div>If you want to use cqlsh then simply "vagrant ssh" in and then run "cqlsh 192.168.10.10"</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-z3FJtEElA30/VELYPCValzI/AAAAAAAAASc/0yfPRS0bIoI/s1600/Screenshot%2B2014-10-18%2B22.14.32.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-z3FJtEElA30/VELYPCValzI/AAAAAAAAASc/0yfPRS0bIoI/s1600/Screenshot%2B2014-10-18%2B22.14.32.png" height="252" width="320" /></a></div><div><br /></div><div>To get spark shell up and running just "vagrant ssh" in and then run the spark-shell command:</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-NNPZk03Bd4I/VELY9YnXA9I/AAAAAAAAASk/JccspB9Ixqw/s1600/Screenshot%2B2014-10-18%2B22.17.26.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-NNPZk03Bd4I/VELY9YnXA9I/AAAAAAAAASk/JccspB9Ixqw/s1600/Screenshot%2B2014-10-18%2B22.17.26.png" height="207" width="320" /></a></div><div><br /></div><div><br /></div><div>Spark shell has been aliased to include the Cassandra spark connector so you can start using Cassandra backed RDDs right away!<br /><br />Any questions or problems just ping me on twitter:&nbsp;@chbatey</div><div><br /></div><div><br /></div><div><br /></div>